@model ExpenseMemberMasterModel
@using System.Data
@using NonFactors.Mvc.Grid
@{
    ViewData["Title"] = "CategoryMaster";
}

<form asp-action="Addmember" asp-controller="Expense">


    <div class="form-floating form-floating-outline mb-4">
        @{
            var groupid = ((IEnumerable<ExpenseGroupModel>)ViewData["groupid"])
            .Select(m => new SelectListItem
            {
                Value = m.GroupName.ToString(), // Assuming ScreenId is of type int
                Text = $"{m.GroupName}"
            });
        }

        @Html.DropDownListFor(model => model.Groupname, groupid, "Select Group", new { @class = "form-control", @required = "required" })
        <label asp-for="Groupname" class="control-label">Group Name</label>
        <span asp-validation-for="Groupname" class="text-danger"></span>
    </div>


    <div class="form-group">
        <label asp-for="Membersname" class="form-label">Members Name</label>
        <input asp-for="Membersname" placeholder="Members Name" class="form-control" />
        <span asp-validation-for="Membersname" class="text-danger"></span>
   </div>

    <div class="form-group">
        <label asp-for="Contributionamaount" class="form-label">Contribution Amount</label>
        <input asp-for="Contributionamaount" placeholder="Contribution Amount" class="form-control" />
    </div>

    <button type="submit"  value="Save" name="buttonType"  class="btn btn-primary">Save</button>
    <button type="submit"  value="Delete" name="buttonType" class="btn btn-primary">Delete</button>

    @if (ViewBag.Message != null)
    {
        <div class="alert alert-info mt-3">
            @ViewBag.Message
        </div>
    }


    @{
        var dataTable = ViewData["Memberdata"] as DataTable;
    }


    <div class="row" style="margin-top:30px">
        <div class="col-md-12 col-lg-0"></div>
        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="card-body dividerblack">
                    <h3 class="centered text-white" style="font-family: 'Lucida Bright'; margin-bottom: 20px; text-align: center;">Members</h3>
                    <table class="table table-bordered" style="border: 1px solid black;">
                        <thead style="background-color: black; color: white;">
                            <tr>
                                <th>Group Name</th>
                                <th>Member Name</th>
                                <th>Contribution Amount</th>

                            </tr>
                        </thead>
                        <tbody>
                            @if (dataTable != null)
                            {
                                foreach (DataRow row in dataTable.Rows)
                                {
                                    <tr>
                                        <td>@row["Groupname"]</td>
                                        <td>@row["Membersname"]</td>
                                        <td>@row["Contributionamaount"]</td>

                                    </tr>
                                }
                            }
                        </tbody>
                    </table>

</form>